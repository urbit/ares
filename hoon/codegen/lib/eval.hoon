/-  *noir
/-  *gene
/+  sack
/+  line
|_  [moan=(jar * hone) =hill]
++  nomm  :: XX todo thread code cache through
  =<
  |=  [subs=* food]
  ^-  [(unit *) _moan]
  ?-  -.nomm
      %par  (both $(nomm left.nomm) $(nomm rite.nomm))
      %not
    ?:  =(0 here.nomm)  ~
    |-  ^-  (unit *)
    ?:  =(1 here.nomm)  `subs
    ?@  subs  ~
    ?-  (cap here.nomm)
      %2  $(here.nomm (mas here.nomm), subs -.subs)
      %3  $(here.nomm (mas here.nomm), subs +.subs)
    ==
  ::
      %one  `moan.nomm
      %two
    =/  nubs  $(nomm cost.nomm)
    ?~  nubs  ~
    =/  firm  $(nomm corn.nomm)
    ?~  firm  ~
    =/  bull  (~(get by ices) rail.nomm)
    ?~  bull
      =.  moan
        =>  sack(moan.seam moan)
        (rout [%.y nubs] firm)
      $(moan (rout [%.y nubs] firm):sack(moan.seam moan))
    =/  hose  (~(get ja moan) +.u.bull)
    |-  ^-  (unit *)
    ?>  ?=(^ hose)
    ?.  (~(huge so soot.i.hose) -.u.bull)  $(hose t.hose)
    $(nomm nomm.norm.i.hose, ices ices.norm.i.hose)
  ::
      %the
    =/  salt  $(nomm pell.nomm)
    ?~  salt  ~
    `?=(^ u.salt)
  ::
      %for
    =/  salt  $(nomm mall.nomm)
    ?~  salt  ~
    ?^  u.salt  ~
    `.+(u.salt)
  ::
      %ivy
    =/  salt  $(nomm this.nomm)
    ?~  salt  ~
    =/  silt  $(nomm that.nomm)
    ?~  silt  ~
    `=(u.salt u.silt)
  ::
      %six
    =/  bean  $(nomm what.nomm)
    ?~  bean  ~
    ?:  bean  $(nomm then.nomm)
    $(nomm else.nomm)
  ::
      %eve
    =/  nubs  $(nomm once.nomm)
    ?~  nubs  ~
    $(nomm then.nomm, subs nubs)
  ::
      %ten
    ?:  =(0 here.nomm)  ~
    =/  true  $(nomm tree.nomm)
    ?~  true  ~
    =|  tack  (list [$?(%2 %3) *])
    |-  ^-  (unit *)
    ?.  =(1 here.nomm)
      ?@  u.true  ~
      ?-  (cap here.nomm)
          %2
        $(tack [[%2 +.u.true] tack], u.true -.u.true, here.nomm (mas here.nomm))
      ::
          %3
        $(tack [[%3 -.u.true] tack], u.true +.u.true, here.nomm (mas here.nomm))
      ==
    =/  thin  $(nomm twig.nomm)
    |-  ^-  (unit *)
    ?^  tack
      ?-  -.i.tack
        %2  $(tack t.tack, thin [thin +.i.tack])
        %3  $(tack t.tack, thin [+.i.tack thin])
      ==
    thin
  ::
      %sip
    $(nomm then.nomm)
  ::
      %tip
    ?~  $(nomm vice.nomm)  ~
    $(nomm then.nomm
  ::
     %spy  ~
  ==
--
